<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zwjsfdbb.top","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="第一章 概述1、ARP协议二层协议，物理层+数据链路层+ARP协议  用于转换IP地址到MAC地址。  2、ICMP协议三层协议，物理层+数据链路层+网络层+ICMP协议 用来与其他主机或路由器交换错误报文和其他重要信息。  3、unix 系统端口定义文件">
<meta property="og:type" content="article">
<meta property="og:title" content="TCP-IP 学习笔记">
<meta property="og:url" content="http://zwjsfdbb.top/2024/03/10/%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/TCPIP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="hack_zz">
<meta property="og:description" content="第一章 概述1、ARP协议二层协议，物理层+数据链路层+ARP协议  用于转换IP地址到MAC地址。  2、ICMP协议三层协议，物理层+数据链路层+网络层+ICMP协议 用来与其他主机或路由器交换错误报文和其他重要信息。  3、unix 系统端口定义文件">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202311021747352.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202311021747324.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312041551150.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312041552610.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312041552127.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312051756436.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312051758301.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312051758535.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312061722038.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312061837578.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312121737362.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312131719720.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312131719353.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312131727862.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401021828207.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401101423974.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401101430582.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401101449994.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401101513637.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401111507843.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401111631247.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401121639758.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401121734838.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240202162432137.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240204151021583.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240204152439555.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240204174349004.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219145309314.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219145436420.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219154150127.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219154537165.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219155324994.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219164416568.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219170855398.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219170931218.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219182724139.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240220151130394.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240220152100038.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240220153704408.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240220165935657.png">
<meta property="og:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img49807ba609f43f705025d3550d41ff34.jpeg">
<meta property="article:published_time" content="2024-03-09T16:00:00.000Z">
<meta property="article:modified_time" content="2024-03-12T15:53:35.978Z">
<meta property="article:author" content="hack_zz">
<meta property="article:tag" content="系统基础">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202311021747352.png">

<link rel="canonical" href="http://zwjsfdbb.top/2024/03/10/%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/TCPIP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>TCP-IP 学习笔记 | hack_zz</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">hack_zz</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">每天进步一点点</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zwjsfdbb.top/2024/03/10/%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/TCPIP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hack_zz">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hack_zz">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          TCP-IP 学习笔记
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-03-10 00:00:00" itemprop="dateCreated datePublished" datetime="2024-03-10T00:00:00+08:00">2024-03-10</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">系统基础</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="第一章-概述"><a href="#第一章-概述" class="headerlink" title="第一章 概述"></a>第一章 概述</h3><h4 id="1、ARP协议"><a href="#1、ARP协议" class="headerlink" title="1、ARP协议"></a>1、ARP协议</h4><p>二层协议，物理层+数据链路层+ARP协议</p>
<p> 用于转换IP地址到MAC地址。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202311021747352.png" alt="image-20231102174739284"></p>
<h4 id="2、ICMP协议"><a href="#2、ICMP协议" class="headerlink" title="2、ICMP协议"></a>2、ICMP协议</h4><p>三层协议，物理层+数据链路层+网络层+ICMP协议</p>
<p>用来与其他主机或路由器交换错误报文和其他重要信息。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202311021747324.png" alt="image-20231102174709184"></p>
<h4 id="3、unix-系统端口定义文件"><a href="#3、unix-系统端口定义文件" class="headerlink" title="3、unix 系统端口定义文件"></a>3、unix 系统端口定义文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/services</span><br></pre></td></tr></table></figure>

<h4 id="4、-课后习题"><a href="#4、-课后习题" class="headerlink" title="4、 课后习题"></a>4、 课后习题</h4><ul>
<li><p>请计算最多有多少个A类、B类和C类网络号。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A类 前8位，第一位为0，2^7=128 不能全0，不能127，就只有126</span><br><span class="line">B类 前16位，前两位为10，2^14=16,384，不可全0，就只有16383</span><br><span class="line">C类 前24位，前三位110，2^21=2,097,152，不可全0，就只有2,097,152</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取一份主机需求RFC拷贝[Braden 1989a]，阅读有关应用于T C P &#x2F; I P协议族每一层的稳健性原则。这个原则的参考对象是什么？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主机需求RFC 1122和1123[Braden 1989a, 1989b]。RFC 1122针对链路层、网络层和运</span><br><span class="line">输层；RFC1123针对应用层。</span><br><span class="line">自由的接收，保守的发送。</span><br></pre></td></tr></table></figure>
</li>
<li><p>1.4 获取一份最新的赋值R F C拷贝。“quote of the day”协议的有名端口号是什么？哪个 R F C对该协议进行了定义？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">https://www.rfc-editor.org/ </span><br><span class="line"></span><br><span class="line">RFC 865 - Quote of the Day Protocol  端口 17 </span><br><span class="line"></span><br><span class="line">RFC1340中，quote of the day协议定义了qotd服务，端口号TDP／UDP17，RFC865对其进行了定义。</span><br><span class="line"></span><br><span class="line">服务器侦听 TCP（UDP ） 端口 17 上的 TCP(UDP) 连接。建立连接后，会向连接发送一条短消息（并且接收到的任何数据都会被丢弃）</span><br></pre></td></tr></table></figure>
</li>
<li><p>1.6  获取一份RFC 1000的拷贝，了解R F C这个术语从何而来。</p>
<p><a target="_blank" rel="noopener" href="https://www.rfc-editor.org/info/rfc1000%EF%BC%8C">https://www.rfc-editor.org/info/rfc1000，</a></p>
<p>RFC始于1969年，由当时就读<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%8A%A0%E5%B7%9E%E5%A4%A7%E5%AD%A6%E6%B4%9B%E6%9D%89%E7%9F%B6%E5%88%86%E6%A0%A1/4014219?fromModule=lemma_inlink">加州大学洛杉矶分校</a>（UCLA）的斯蒂芬·克罗克（Stephen D. Crocker）用来记录有关<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/ARPANET/0?fromModule=lemma_inlink">ARPANET</a>开发的非正式文档，他是第一份RFC文档的撰写者。最终演变为用来记录互联网规范、协议、过程等的标准文件。基本的互联网通信协议都有在RFC文件内详细说明。</p>
</li>
</ul>
<p>1.7 几个关键的图</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312041551150.png" alt="image-20231204155110993"></p>
<p>TCP &#x2F;UDP:  TCP是可靠的运输层协议，通过超时重传，三次握手等来保证。UDP是不可靠的。</p>
<p>IP：提供不可靠的无连接的数据报传输服务，靠上层实现可靠传输。</p>
<p>ICMP：IP的附属协议，用于交换错误报文以及其他重要信息。</p>
<p>IGMP：Internet 组管理协议，它用来把一个UDP数据报多播到多个主机。多播是一种一对多的通信方式，允许一个主机发送的数据包被多个主机接收。这在一些应用中非常有用，比如在线会议、网络电视等。为了有效地进行多播，路由器需要知道哪些主机想要接收特定的多播数据包。这就是IGMP的作用。主机会使用IGMP向路由器发送报告，告诉路由器它想要加入（或离开）哪个多播组。</p>
<p>ARP&#x2F;RARP：提供IP到MAC地址之间的转换。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312041552610.png" alt="image-20231204155204552"></p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312041552127.png" alt="image-20231204155219066"></p>
<h3 id="第二章链路层"><a href="#第二章链路层" class="headerlink" title="第二章链路层"></a>第二章链路层</h3><h4 id="1、链路层的功能"><a href="#1、链路层的功能" class="headerlink" title="1、链路层的功能"></a>1、链路层的功能</h4><ul>
<li>为IP模块发送接收数据报</li>
<li>为ARP模块发送ARP请求和接收应答</li>
<li>为RARP发送RAPR请求和接收应答</li>
</ul>
<h4 id="2、协议-以太网、令牌环网、FDDI（光纤分布式数据接口）及RS-232串行线路"><a href="#2、协议-以太网、令牌环网、FDDI（光纤分布式数据接口）及RS-232串行线路" class="headerlink" title="2、协议  (以太网、令牌环网、FDDI（光纤分布式数据接口）及RS-232串行线路)"></a>2、协议  (以太网、令牌环网、FDDI（光纤分布式数据接口）及RS-232串行线路)</h4><ul>
<li><p>以太网链路层协议</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312051756436.png" alt="image-20231205175613294"></p>
</li>
<li><p>SLIP</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312051758301.png" alt="image-20231205175840194"></p>
</li>
<li><p>PPP(adsl宽带)</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312051758535.png" alt="image-20231205175855435"></p>
<p>串行线路IP（SLIP）和点对点协议（PPP）是两种数据链路层协议，主要用于建立直接的互联网连接。它们通常应用于以下设备：</p>
<ul>
<li><p>拨号和DSL调制解调器：这些设备使用PPP或SLIP协议在用户的计算机和互联网服务提供商（ISP）之间建立直接的互联网连接。</p>
</li>
<li><p>路由器：路由器可能使用PPP或SLIP协议在不同的网络之间建立连接。</p>
</li>
<li><p>串行设备：如一些老式的终端设备，可能使用SLIP协议通过串行线路进行通信。</p>
</li>
<li><p>无线和卫星设备：这些设备可能使用PPP协议进行数据传输。</p>
</li>
</ul>
<p>请注意，尽管SLIP和PPP都可以用于这些设备，但现在PPP更常用，因为它提供了<strong>错误检测</strong>和<strong>配置</strong>功能，而SLIP没有这些功能。</p>
</li>
<li><p>​	Loopback</p>
<p>换回接口  127.0.0.1（localhost）,处理IP数据报的过程<img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312061722038.png" alt="image-20231206172231946"></p>
</li>
</ul>
<h4 id="3、串行线路吞吐量计算"><a href="#3、串行线路吞吐量计算" class="headerlink" title="3、串行线路吞吐量计算"></a>3、串行线路吞吐量计算</h4><p>如果线路速率是9600 b&#x2F;s，而一个字节有8 bit，加上一个起始比特和一个停止比特，那么 线路的速率就是960 B&#x2F;s（字节&#x2F;秒）。</p>
<p>当只有交互通信时，如果线路速率是 9600 b&#x2F;s，那么任何方向上的 1字节数据（假设有 5个字节的压缩帧头）往返一次都大约需要 12.5 ms。它比前面提到的100~200 ms要小得多。需要注意的是，由于帧头从 4 0个字节压缩到 5个字节，使得1字节数据往返时间从85 ms减到12.5 ms。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">12.5ms = (5+1)* 10 * 2 / 9600 * 1000</span><br><span class="line">85 ms = (40+1)* 10 * 2 /9600 * 1000</span><br></pre></td></tr></table></figure>

<h4 id="4、习题"><a href="#4、习题" class="headerlink" title="4、习题"></a>4、习题</h4><p>如果你的系统支持 n e t s t a t( 1 )命令（参见 3 . 9节），那么请用它确定系统上的接口及其 M T U。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312061837578.png" alt="image-20231206183744504"></p>
<h3 id="第三章-IP：-网际协议"><a href="#第三章-IP：-网际协议" class="headerlink" title="第三章 IP： 网际协议"></a>第三章 IP： 网际协议</h3><h4 id="1、概念"><a href="#1、概念" class="headerlink" title="1、概念"></a>1、概念</h4><p>IP 提供不可靠、无连接的数据报传送服务。不可靠指的是发生错误，丢弃数据包，发送ICMP报文。无连接指的是IP 不维护任何关于后续数据报的状态信息。</p>
<h4 id="2、字段"><a href="#2、字段" class="headerlink" title="2、字段"></a>2、字段</h4><p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312121737362.png" alt="image-20231212173747280"></p>
<h4 id="3、IP路由选择的功能"><a href="#3、IP路由选择的功能" class="headerlink" title="3、IP路由选择的功能"></a>3、IP路由选择的功能</h4><ul>
<li>寻找完全匹配项，交付下一站路由器或者接口</li>
<li>寻找网络号匹配项，交付下一站路由器或者接口</li>
<li>寻找默认路由，交付下一站路由器</li>
</ul>
<h4 id="4、习题-1"><a href="#4、习题-1" class="headerlink" title="4、习题"></a>4、习题</h4><p>1）环回地址必须是1 2 7 . 0 . 0 . 1吗？</p>
<p><strong>不</strong>，任何网络I D为1 2 7的A类地址都是可行的。</p>
<p>2） 在图3 - 6中指出有两个以上网络接口的路由器。</p>
<p>kpno 有5个接口，三个点对点，两个以太网，gateway 三个接口，两个点对点，一个以太网，R10有四个以太网接口，netlab 三个接口，两个点对点，一个以太网。</p>
<p> 3） 子网号为16 bit的A类地址与子网号为8 bit的B类地址的子网掩码有什么不同？ </p>
<p>没有区别，255.255.255.0</p>
<p>4） 阅读RFC 1219 [Tsuchiya 1991]，学习分配子网号和主机号的有关推荐技术。 </p>
<p>5） 子网掩码2 5 5 . 2 5 5 . 0 . 2 5 5是否对A类地址有效？ </p>
<p>有效但不建议。</p>
<p>6） 你认为为什么3 . 9小节中打印出来的环回接口的 M T U要设置为1 5 3 6？ </p>
<p>In order to allow Ethernet II and IEEE 802.3 framing to be used on the same Ethernet segment, a unifying standard, IEEE 802.3x-1997, was introduced that required that EtherType values be greater than or equal to 1536. That value was chosen because the maximum length (<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Maximum_Transmission_Unit">MTU</a>) of the data field of an Ethernet 802.3 frame is 1500 bytes and 1536 is equivalent to the number 600 in the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Hexadecimal">hexadecimal</a> numeral system. Thus, values of 1500 and below for this field indicate that the field is used as the size of the payload of the Ethernet frame while values of 1536 and above indicate that the field is used to represent an EtherType. The interpretation of values 1501–1535, inclusive, is undefined.</p>
<p>7） T C P &#x2F; I P协议族是基于一种数据报的网络技术，即 I P层，其他的协议族则基于面向连接的 网络技术。阅读文献[Clark 1988]，找出数据报网络层提供的三个优点。</p>
<ul>
<li>数据报降低了路由器对应连接状态的需求。</li>
<li>数据报提供了基本的构件，在它的上面可以构造不可靠的（UDP）和可靠的（TCP）的运输层。</li>
<li>数据报代表了最小的网络层假定，使得可以使用很大范围的数据链路层服务。</li>
</ul>
<h3 id="第四章-ARP协议"><a href="#第四章-ARP协议" class="headerlink" title="第四章 ARP协议"></a>第四章 ARP协议</h3><h4 id="1、基本概念"><a href="#1、基本概念" class="headerlink" title="1、基本概念"></a>1、基本概念</h4><p>A R P为I P地址到对应的硬件地址之间提供动态映射。简单来讲就是网络通信前，主机并不知道某个IP位于哪个主机的哪个接口，于是它发送一个ARP广播包，询问某IP的MAC地址是什么，收到广播包的目标主机回复ARP请求，收到ARP响应后，主机更新ARP缓存，准备通信。</p>
<p>arp -a 可以查看本机的arp 高速缓存。</p>
<p>示例 进行FTP连接</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312131719720.png" alt="image-20231213171911599"></p>
<h4 id="2-、-ARP报文的格式"><a href="#2-、-ARP报文的格式" class="headerlink" title="2 、 ARP报文的格式"></a>2 、 ARP报文的格式</h4><p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312131719353.png" alt="image-20231213171953299"></p>
<p>抓了一个广播报文，对应报文格式进行分析</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202312131727862.png" alt="image-20231213172724806"></p>
<p>硬件类型字段为 1：以太网地址。协议类型字段为 0 x 0 8 0 0 即表示I Pv4地址。硬件地址长度和协议地址长度，对于以太网上 I P地址的A R P请求或应答来说，它们的值分别为 6和4。 操作字段有四种操作类型， A R P请求（1）、A R P应答（2）、R A R P请求（3）和R A R P应答（4）。接着是发送端硬件地址、发送端I P地址、目的端硬件地址和目的端I P地址。</p>
<h4 id="3、代理ARP"><a href="#3、代理ARP" class="headerlink" title="3、代理ARP"></a>3、代理ARP</h4><p>​		代理ARP是<strong>ARP协议的一个变种</strong>。 对于没有配置缺省网关的计算机要和其他网络中的计算机实现通信，网关收到源计算机的ARP 请求会使用自己的MAC 地址与目标计算机的IP地址对源计算机进行应答。 代理ARP就是将一个主机“作为”另一个主机对收到的ARP请求进行应答。</p>
<h4 id="4、免费ARP"><a href="#4、免费ARP" class="headerlink" title="4、免费ARP"></a>4、免费ARP</h4><p>指的是主机发送ARP寻找自己的IP地址，发生在系统引导期间进行接口配置的时候，发送端IP和目的IP一致。</p>
<p>作用：（1）广播通知IP地址对应的MAC地址，（2）防止IP冲突。</p>
<h4 id="5、习题"><a href="#5、习题" class="headerlink" title="5、习题"></a>5、习题</h4><p>1）当输入命令以生成类似图4 - 4那样的输出时，发现本地A R P快速缓存为空以后，输入命令 bsdi ％ rsh svr4 arp -a 如果发现目的主机上的 A R P快速缓存也是空的，那将发生什么情况？ (该命令将在s v r 4 主机上运行a r p -a命令）。</p>
<p>执行rsh建立连接时，发送没有对方的MAC地址，就会发送ARP广播，然后目标主机回应的同时，把本地主机的IP和MAC关系也存入ARP缓存表，最后就可以建立连接。</p>
<p> 2）请描述如何判断一个给定主机是否能正确处理接收到的非必要的 A R P请求的方法。 </p>
<p>测试没必要的ARP请求是否会更新高速缓存。</p>
<p>只有在ARP缓存中的映射关系过期或不存在时，本地主机才会发送ARP请求来更新或获取最新的MAC地址。</p>
<p>只要收到目标MAC是自己的ARP reply包或arp广播包(包括ARP request和ARP reply)，都会接受并缓存。</p>
<p>ARP replay:</p>
<p>(1) 目标MAC是自己</p>
<p>(2) ARP replay 广播</p>
<p>ARP request:</p>
<p>(1) ARP 请求广播      免费ARP也属于请求广播，只不过目的IP是自身</p>
<p>3）由于发送一个数据包后 A R P将等待响应，因此 4 . 2节所描述的步骤7可能会持续一段时间。 你认为A R P将如何处理在这期间收到相同目的 I P地址发来的多个数据包？</p>
<p>链路层应该保存(而不是丢弃)去往同一未解析IP地址的每组分组中的至少一个(最新的)分组，并在地址被解析后发送保存的分组。讨论:不遵循此建议会导致每次交换的第一个数据包丢失。虽然高层协议通常可以通过重传来处理数据包丢失，但数据包丢失确实会影响性能。例如，丢失TCP打开请求会导致初始往返时间估计值被夸大。基于UDP的应用程序(如域名系统)受到的影响更严重。</p>
<p> 4）在4 . 5节的最后，我们指出Host Requirements RFC和伯克利派生系统在处理活动 A R P表目 的超时时存在差异。那么如果我们在一个由伯克利派生系统的客户端上，试图与一个正 在更换以太网卡而处于关机状态的服务器主机联系，这时会发生什么情况？如果服务器 在引导过程中广播一份免费 A R P，这种情况是否会发生变化？</p>
<p>伯克利派生系统尝试通信，直到20分钟超时后，删除该缓存，重新请求arp，通信成功。</p>
<p>广播免费ARP，伯克利派生系统更新缓存，通信成功。</p>
<h3 id="第五章-RARP协议"><a href="#第五章-RARP协议" class="headerlink" title="第五章 RARP协议"></a>第五章 RARP协议</h3><h4 id="1、概念-1"><a href="#1、概念-1" class="headerlink" title="1、概念"></a>1、概念</h4><p>有本地磁盘的一般从磁盘的配置文件中获取IP地址，无盘机则从接口卡上读取MAC地址，然后发送一份RARP请求，请求获取IP地址（RARP响应中）。</p>
<h4 id="2、分组格式"><a href="#2、分组格式" class="headerlink" title="2、分组格式"></a>2、分组格式</h4><p>与ARP基本一致，帧类型为0x8035，请求的操作代码是3 ，应答操作代码是4。</p>
<p>请求是广播形式（硬件层，不经过路由转发），应答是单播，一般以最先收到的应答为准。</p>
<h4 id="3、习题"><a href="#3、习题" class="headerlink" title="3、习题"></a>3、习题</h4><p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401021828207.png" alt="image-20240102182850083"></p>
<p>3.1 RARP需要不同的帧类型字段吗？ A R P和R A R P都使用相同的值0 x 0 8 0 6吗？</p>
<p>不一定需要，因为OP字段已经可以区分ARP和RARP，但是一半还是区分了，RARP的帧类型是0x8035。</p>
<p>3.2 在一个有多个R A R P服务器的网络上，如何防止它们的响应发生冲突？</p>
<p>分为主服务器和次服务器，次服务器加一个随机的延迟再响应或者用于回复重复的请求。</p>
<h3 id="第六章-ICMP协议"><a href="#第六章-ICMP协议" class="headerlink" title="第六章 ICMP协议"></a>第六章 ICMP协议</h3><h4 id="1、引言"><a href="#1、引言" class="headerlink" title="1、引言"></a>1、引言</h4><p>ICMP用于传递差错信息以及其他用户需要注意的信息。正式规范在RFC792.</p>
<p>报文格式如下</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401101423974.png" alt="image-20240110142357892"></p>
<h4 id="2、报文的类型"><a href="#2、报文的类型" class="headerlink" title="2、报文的类型"></a>2、报文的类型</h4><p>ICMP报文分为查询报文和差错报文，</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401101430582.png" alt="image-20240110143011501"></p>
<p>ICMP地址掩码请求用于无盘系统在引导过程中获取自己的子网掩码。</p>
<p>ICMP时间戳请求允许系统向另一个系统查询当前的时间。</p>
<p>ICMP端口不可达报文格式如下：</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401101449994.png" alt="image-20240110144927932"></p>
<h4 id="3、习题-1"><a href="#3、习题-1" class="headerlink" title="3、习题"></a>3、习题</h4><h5 id="3-1-在6-2节的末尾，我们列出了5种不发送ICMP差错报文的特殊条件。如果这些条件不满足而我们又在局域网上向一个似乎不存在的端口号发送一份广播UDP数据报，这时会发生什么样的情况？"><a href="#3-1-在6-2节的末尾，我们列出了5种不发送ICMP差错报文的特殊条件。如果这些条件不满足而我们又在局域网上向一个似乎不存在的端口号发送一份广播UDP数据报，这时会发生什么样的情况？" class="headerlink" title="3.1 在6.2节的末尾，我们列出了5种不发送ICMP差错报文的特殊条件。如果这些条件不满足而我们又在局域网上向一个似乎不存在的端口号发送一份广播UDP数据报，这时会发生什么样的情况？"></a>3.1 在6.2节的末尾，我们列出了5种不发送ICMP差错报文的特殊条件。如果这些条件不满足而我们又在局域网上向一个似乎不存在的端口号发送一份广播UDP数据报，这时会发生什么样的情况？</h5><p>可能会冲突，造成网络不可用。</p>
<h5 id="3-2-阅读RFC-Braden-1989a-，注意生成一个ICMP端口不可达差错是否为“必须”，“应该”或者“可能”。这些信息所在的页码和章节是多少？"><a href="#3-2-阅读RFC-Braden-1989a-，注意生成一个ICMP端口不可达差错是否为“必须”，“应该”或者“可能”。这些信息所在的页码和章节是多少？" class="headerlink" title="3.2 阅读RFC [Braden 1989a]，注意生成一个ICMP端口不可达差错是否为“必须”，“应该”或者“可能”。这些信息所在的页码和章节是多少？"></a>3.2 阅读RFC [Braden 1989a]，注意生成一个ICMP端口不可达差错是否为“必须”，“应该”或者“可能”。这些信息所在的页码和章节是多少？</h5><p>可能</p>
<h5 id="3-3-阅读RFC-1349-Almquist-1992-，看看IP的服务类型字段（见图3-2）是如何被ICMP设置的？"><a href="#3-3-阅读RFC-1349-Almquist-1992-，看看IP的服务类型字段（见图3-2）是如何被ICMP设置的？" class="headerlink" title="3.3 阅读RFC 1349 [Almquist 1992]，看看IP的服务类型字段（见图3-2）是如何被ICMP设置的？"></a>3.3 阅读RFC 1349 [Almquist 1992]，看看IP的服务类型字段（见图3-2）是如何被ICMP设置的？</h5><p>发送一个ICMP差错总是将TOS置为0。发送一个ICMP查询请求可以将TOS置为任何值，但是发送相应的应答必须将TOS置为相同的值。</p>
<h5 id="3-4-如果你的系统提供netstat命令，请用它来查看接收和发送的ICMP报文类型。"><a href="#3-4-如果你的系统提供netstat命令，请用它来查看接收和发送的ICMP报文类型。" class="headerlink" title="3.4 如果你的系统提供netstat命令，请用它来查看接收和发送的ICMP报文类型。"></a>3.4 如果你的系统提供netstat命令，请用它来查看接收和发送的ICMP报文类型。</h5><p>netstat -s </p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401101513637.png" alt="image-20240110151328559"></p>
<h3 id="第七章-ping"><a href="#第七章-ping" class="headerlink" title="第七章 ping"></a>第七章 ping</h3><h4 id="7-1-概念"><a href="#7-1-概念" class="headerlink" title="7.1 概念"></a>7.1 概念</h4><p>ping程序是对两个TCP&#x2F;IP系统连通性进行测试的基本工具。它只利用ICMP回显请求和回显应答报文，而不用经过传输层（TCP&#x2F;UDP）。Ping服务器一般在内核中实现ICMP的功能。</p>
<h4 id="7-2-ping-特殊功能"><a href="#7-2-ping-特殊功能" class="headerlink" title="7.2  ping 特殊功能"></a>7.2  ping 特殊功能</h4><p>Ping还给我们提供了检测IP记录路由和时间戳选项的机会。</p>
<h4 id="7-3-习题"><a href="#7-3-习题" class="headerlink" title="7.3 习题"></a>7.3 习题</h4><p>7.3.1 若把bsdi和slip主机之间的SLIP链路设置为9600 b&#x2F;s，请计算这时的RTT。假定默认的数据是56字节。</p>
<p>SLIP 每个字节含有8bit数据、1bit起始位和1bit结束位，也就是每个字节10bit , 9600 b&#x2F;s 也就是 960B&#x2F;s</p>
<p>(56+20+8+2)&#x2F;960  * 2 &#x3D;  17.9 S</p>
<p>7.3.2、当前BSD版中的ping程序允许我们为ICMP报文的数据部分指定一种模式（数据部分的前8个字节不用来存放模式，因为它要存放发送报文的时间）。如果我们指定的模式为0xc0，请重新计算上一题中的答案（提示：阅读2.4节）。</p>
<p>（86+56-8）&#x2F;960* 2    另外48字节是因为56字节的数据部分的最后48字节必须被转义.</p>
<p>7.3.3、 使用压缩SLIP（CSLIP，见2.5节）是否会影响我们在7.2节中看到的ping输出中的时间值？</p>
<p>CSLIP通过压缩IP头部减少了数据包的大小，这在理论上可以减少数据包在网络中的传输时间，特别是在低带宽的连接上。然而，ping程序测量的往返时间（RTT）包括了多个组成部分：</p>
<p>\1. <strong>数据包序列化时间</strong>：数据包从主机内存转移到网络接口的时间。<br>\2. <strong>传输时间</strong>：数据包在物理网络中传输的时间。<br>\3. <strong>传播延迟</strong>：信号在介质中传播的时间。<br>\4. <strong>处理延迟</strong>：中间设备（如路由器）和目标主机处理数据包的时间。<br>\5. <strong>排队延迟</strong>：数据包在网络设备中等待处理和转发的时间。</p>
<p>CSLIP压缩主要影响的是传输时间，因为它减少了数据包的大小。但是，传输时间只是RTT的一部分。在高速网络中，传输时间可能只占RTT的一小部分，而传播延迟和处理延迟可能更为显著。因此，即使CSLIP减少了传输时间，整体的RTT可能仍然受到其他延迟因素的显著影响。</p>
<p>此外，ICMP报文的数据部分通常很小，因此即使IP头部被压缩，对整个ICMP报文的大小影响也不大，从而对RTT的影响也较小。而且，CSLIP的压缩效果对于连续的TCP&#x2F;IP数据包更为显著，因为它可以省略多个数据包之间未发生变化的IP头部信息。对于偶尔发送的ICMP报文，压缩效果可能不那么明显。</p>
<p>总的来说，CSLIP可能会在一定程度上减少RTT，特别是在低带宽的网络中，但这种影响可能不大，而且可能被其他延迟因素所掩盖。</p>
<p>7.3.4、在图2-4中，ping环回地址与ping主机以太网地址会出现什么不同？</p>
<p>ping环回地址更快，差别在于以太网驱动程序识别这是一个本地IP地址。</p>
<h3 id="第八章-traceroute"><a href="#第八章-traceroute" class="headerlink" title="第八章 traceroute"></a>第八章 traceroute</h3><p>8.1、原理</p>
<p>Traceroute程序的操作过程：发送一份TTL字段为1的IP数据报给目的主机。处理这份数据报的第一个路由器将TTL值减1，丢弃该数据报，并发回一份超时ICMP报文(code为0)。这样就得到了该路径中的第一个路由器的地址。然后Traceroute程序发送一份TTL值为2的数据报，这样我们就可以得到第二个路由器的地址。继续这个过程直至该数据报到达目的主机。</p>
<p>Traceroute程序发送一份UDP数据报给目的主机，但它选择一个不可能的值作为UDP端口号（大于30 000），使目的主机的任何一个应用程序都不可能使用该端口。因为，当该数据报到达时，将使目的主机的UDP模块产生一份“端口不可达”错误（见6.5节）的ICMP报文。这样，Traceroute程序所要做的就是区分接收到的ICMP报文是超时还是端口不可达，以判断什么时候结束。</p>
<p>8.2、习题</p>
<p>8.2.1、当IP将接收到的TTL字段减1，发现它为0时，将会发生什么结果？</p>
<p>根据文章来讲，如果不是目标主机，则是会发一个超时ICMP报文；如果是目标主机则会发送一个端口不可达的ICMP差错报文。</p>
<p>8.2.2、traceroute程序是如何计算RTT的？将这种计算RT T的方法与ping相比较。</p>
<p>在windows 下，ping 程序发送的数据包中并未存放发送时间，RTT是ping内部自己计算的。</p>
<p>如下的response 中估计是时间戳互相减去得到的。</p>
<p>p i n g程序通过在I C M P报文数据中存放发送请求的时间值来计算往返时间。当应答返回 时，用当前时间减去存放在 I C M P报文中的时间值，即是往返时间。请求包里面没得，应答里面有。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401111507843.png" alt="image-20240111150732456"></p>
<p>而在Linux下，的确是存在发送时间戳的。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401111631247.png" alt="image-20240111163153167"></p>
<p>windows下的tracert，抓包的icmp包中也并未看到任何时间戳的位置。</p>
<p>Linux的Traceroute 也并未发现icmp 数据包中包含时间戳的位置，可能不同架构的实现是不同的。</p>
<p>8.2.3、（本习题与下一道习题是基于开发traceroute程序过程中遇到的实际问题，它们来自于traceroute程序源代码注释）。假设源主机和目的主机之间有三个路由器（R1、R2和R3），而中间的路由器（R2）在进入TTL字段为1时，将TTL字段减1，但却错误地将该IP数据报发往下一个路由器。请描述会发生什么结果。在运行traceroute程序时会看到什么样的现象？</p>
<p>第1行输出是正确的，并且标识了R1，下一个探测分组启动时将TTL置为2，并且这个值被R1减为1。当R2收到这个分组时，把TTL从1减为0，但是错误地将它传递给了R3。R3看见进入的TTL是0就将超时的分组发送回来。这就意味着第2行输出（TTL为2）标识了R3，而不是R2。第3行输出正确地标识了R3。这个错误所表现出来的线索就是两个连续的输出行标识了同一个路由器。</p>
<p>8.2.4、同样，假设源主机和目的主机之间有三个路由器。由于目的主机上存在错误，因此，它总是将进入TTL值作为外出ICMP报文的TTL值。请描述这将发生什么结果，你会看到什么现象。</p>
<p>在这种情况下，TTL为1标识了R1，TTL为2标识了R2，TTL为3标识了R3，但是当TTL为4时，UDP数据报到达了目的地，其输入的TTL为1。ICMP端口不可达报文生成了，但它的TTL是1（错误地从进入的TTL复制而来）。这个ICMP报文到了R3，在那儿TTL被减1，报文被丢弃。没有生成一个ICMP超时报文，因为被丢弃的数据报时一个ICMP差错报文。</p>
<p>8.2.5、在图8-8运行例子中，我们可以在sun和netb之间的SLIP链路上运行tcpdump程序。如果指定-v选项，就可以看到返回ICMP报文的TTL值。这样，我们可以看到进入netb、butch、Gabby和enss142.UT.westnet.net的TTL值分别为255、253、252和249。这是否为我们判断是否存在丢失路由器提供了额外的信息？</p>
<p>如果你看到的TTL值从255开始递减，这通常意味着发送源设置了TTL的最大值255。在你的例子中，netb的TTL值为255，butch为253，Gabby为252，enss142.UT.westnet.net为249。这表明数据包在到达netb和butch之间可能经过了一个路由器，在butch和Gabby之间没有经过路由器，在Gabby和enss142.UT.westnet.net之间经过了三个路由器。</p>
<p>8.2.6、SunOS和SVR4都提供了带-l选项的ping版本，以提供松源选路。手册上说明，该选项可以与-R选项（指定记录路由选项）一起使用。如果已经进入到这些系统中，请尝试同时用这两个选项。其结果是什么？如果采用tcpdump来观测数据报，请描述其过程。没答案。</p>
<p>8.2.7、比较ping和traceroute程序在处理同一台主机上客户的多个实例的不同点。</p>
<p>ping的客户把ICMP回显请求报文的标识符字段设置为它的进程ID。ICMP回显应答报文包含同样值的标识符字段。每个客户都要查看这个返回的标识符字段，并且只处理那些它发送过的报文。</p>
<p>traceroute程序在处理来自同一台主机上的多个客户端实例的请求时，使用了两个主要的机制来区分每个实例的数据包：源端口号和ICMP的标识符字段。</p>
<p>8.2.8、比较ping和traceroute程序在计算往返时间上的不同点。</p>
<p>上面已经说过。</p>
<p>8.2.9、我们已经说过，traceroute程序选取开始UDP目的主机端口号为33453，每发送一个数据报将此数加1。在1.9节中，我们说过暂时端口号通常是1024~5000之间的值，因此traceroute程序的目的主机端口号不可能是目的主机上所使用的端口号。在Solaris2.2系统中的情况也是如此吗？（提示：查看E.4节）</p>
<p>默认情况下Solaris 2.2从32768开始使用临时的UDP端口，所以目的主机上的目的端口已经被使用的机会更大</p>
<p>8.2.10、RFC 1393 [Malkin 1993b]提出了另一种判断到目的主机路径的方法。请问其优缺点是什么？</p>
<p>优点：</p>
<p><strong>无需额外数据包</strong>：由于路由信息是直接记录在原始数据包的IP选项中，因此不需要额外的ICMP Time Exceeded消息来进行每一跳的跟踪。</p>
<p><strong>透明性</strong>：这种方法对于传输路径上的每个路由器是透明的，它们只需要在转发数据包时，将自己的地址添加到IP选项中。</p>
<p><strong>简化网络负载</strong>：理论上，这种方法可以减少网络上的诊断流量，因为它不需要为了发现路径上的每一跳而发送和接收多个数据包。</p>
<p>缺点：</p>
<p> <strong>兼容性问题</strong>：并非所有的路由器都支持或允许在转发的数据包中处理IP选项，这可能导致路径信息不完整。</p>
<p><strong>安全风险</strong>：记录数据包路径的能力可能会被恶意用户利用来进行网络侦察，从而识别网络的结构和潜在的脆弱点。</p>
<p><strong>性能影响</strong>：处理IP选项需要额外的处理时间，这可能会对路由器的性能产生负面影响，尤其是在高速网络环境中。</p>
<p><strong>数据包大小限制</strong>：IP头部的选项字段有长度限制，这可能限制了可以记录的路由器地址数量。</p>
<p><strong>数据包被丢弃的风险</strong>：由于IP选项可能会增加数据包头部的大小，这可能导致数据包超过网络的最大传输单元（MTU），从而被某些路由器丢弃。</p>
<p><strong>标准化和普及</strong>：RFC 1393没有被广泛采纳为标准实践，因此在实际网络中很少使用。</p>
<h3 id="第九章-IP选路"><a href="#第九章-IP选路" class="headerlink" title="第九章  IP选路"></a>第九章  IP选路</h3><p>9.1 原理（静态选路）</p>
<p>IP搜索路由表的步骤：</p>
<ul>
<li>搜索匹配的主机地址； </li>
<li>搜索匹配的网络地址； </li>
<li>搜索默认表项</li>
</ul>
<p>netstat -rn 显示路由表</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401121639758.png" alt="image-20240112163912680"></p>
<ul>
<li>G 代表该路由到一个网关</li>
<li>U代表该路由可用</li>
<li>H代表该路由到一个主机</li>
<li>D 该路由是被ICMP重定向报文创建</li>
<li>M 该路由被ICMP重定向报文修改</li>
</ul>
<p>9.2  ICMP重定向差错</p>
<p>ICMP 重定向差错可以用来帮助选路由。如图所示，假设ernest-laptop主机的路由表中只有一个默认的路由选项Kongming20，当它要访问网络时，IP数据报首先发送给Kongming20，随后Kongming20发送它跟ernest-laptop在同一个局域网内，同样它还是要发送给路由器，于是它发送了一个icmp重定向报文给ernest-laptop，告诉他你以后不要发给我了，你可以直接发送给路由器，于是ernest-laptop更新自己的路由表，后续的数据报文就直接发送到路由器了，进而转发，直到目的主机。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img/202401121734838.png" alt="image-20240112173414762"></p>
<p>9.3 ICMP路由器发现报文</p>
<p>主机在引导以后要广播或多播传送一份路由器请求报文。一台或更多台路由 器响应一份路由器通告报文。另外，路由器定期地广播或多播传送它们的路由器通告报文， 允许每个正在监听的主机相应地更新它们的路由表。</p>
<p>9.4 习题</p>
<p>9.4.1 为什么你认为存在两类ICMP重定向报文—网络和主机？</p>
<p>答： 当ICMP标准第1次发布时，RFC 792 [Postel 1981b]所述的划分子网技术还没有使用。并且使用一个网络重定向而不是N个主机重定向（对于目的网络中的所有N个主机）也节省了路由表的空间</p>
<p>9.4.2 在9.4节开头列出的svr4主机上的路由表中，到主机slip（140.252.13.65）的特定路由是必需的吗？如果把这一项从路由表中删除会有什么变化？</p>
<p>答： 不是必须的，删除后会发往默认路由，最终再经过ICMP重定向包，重建这个路由。</p>
<p>9.4.3 考虑有一电缆连接4.2BSD主机和4.3BSD主机。假定网络号是140.1。4.2BSD主机把主机号为全0的地址识别为广播地址(140.1.0.0)，而4.3BSD通常使用全1的主机号（140.1.255.255）发送广播。另外，4.2BSD主机在默认条件下要尽力转发接收到的数据报，尽管它们只有一个接口。请描述当4.2BSD主机收到一份目的地址为140.1.255.255的IP数据报时会发生什么事。</p>
<p>答： 因为4.2BSD主机并没有将其识别成广播地址，因此他会发送arp广播，寻找对应MAC地址，最终无回应，丢弃这个数据包。</p>
<p>9.4.4 继续前一个习题，假定有人在子网140.1上的某个系统ARP高速缓存中增加了一项（用arp命令）内容，指定IP地址140.1.255.255对应的以太网地址为全1（以太网广播地址）。请描述此时发生的情况</p>
<p>答： arp广播会收到回应，因此4.2BSD开始发送数据，然后局域网的主机就会接收，同时因为目的IP时140.1.255.255 又不断广播，最终导致网络熔断。</p>
<h3 id="第10章-动态选路"><a href="#第10章-动态选路" class="headerlink" title="第10章 动态选路"></a>第10章 动态选路</h3><h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>RIP、OSPF、BGP、无分类域间选路</p>
<p>Internet是以一组自治系统(AS，Autonomous System)的方式组织的，各个自治系统可以选择自治系统中各个路由器之间的选路协议。早期采用的是RIP协议，现在已经被OSPF替代。</p>
<p>此外还有外部网关协议EGP（Exterier Gateway Protocol）或域内选路协议的分隔选路协议用于不同自治系统之间的路由器。</p>
<h4 id="10-1-RIP协议"><a href="#10-1-RIP协议" class="headerlink" title="10.1 RIP协议"></a>10.1 RIP协议</h4><p>路由信息协议（RIP）是一种使用广泛的内部网关协议，使用的是距离矢量算法，以跳数作为网络度量值，使用UDP的520端口进行RIP通信，采用广播或者组播进行路由更新，最大跳数15跳，16跳代表不可达，所以只适用于中小型网络。RIP协议默认的路由更新周期是30S。</p>
<p>该协议有3个版本v、v2，RIPng。v1 不支持子网，无法支持可变长度子网掩码，并且不支持认证。v2 版本解决了以上问题。RIPng则用于IPV6地址。</p>
<p>工作原理：</p>
<ul>
<li>初始化：从各接口发送RIP数据包，向相邻路由器请求完整的路由更新。</li>
<li>接受请求：对请求数据包进行处理，返回整个路由表。</li>
<li>接受响应：接收到响应，对路由表项进行更新。</li>
<li>路由更新：30s 一次发送应答消息给相邻路路由器。超时时间180s，180s内没收到路由更新信息，设置跳数为16，240s 则删除该路由信息。</li>
<li>触发路由更新：路由改变时，路由器发送该表的路由信息给相邻的路由器。</li>
</ul>
<p>不足之处：</p>
<ul>
<li>过于简单，以跳数为依据计算度量值，经常得出非最优路由</li>
<li>度量值以16为限，不适合大的网络</li>
<li>收敛性差，时间经常大于5分钟</li>
</ul>
<h4 id="10-2-OSPF：开放最短路径优先"><a href="#10-2-OSPF：开放最短路径优先" class="headerlink" title="10.2 OSPF：开放最短路径优先"></a>10.2 OSPF：开放最短路径优先</h4><p>OSPF是除RIP外的另一个内部网关协议，是链路状态协议。ospf 不采用跳数，而是根据接口的吞吐率、拥塞状况、往返时间、可靠性等实际链路的负载能力定出路由的代价。</p>
<p>它采用的是每个路由器主动地测试与其邻站相连链路的状态，将这些信息发送给它的其他邻站，而邻站将这些信息在自治系统中传播出去。每个路由器接收这些链路状态信息，并建立起完整的路由表。采用IP数据报，协议号89。</p>
<p>优点：</p>
<p>（1）、OSPF可以根据IP服务类型计算路由集。</p>
<p>（2）、给每个接口分配一个无维数的费用</p>
<p>（3）、存在多个相同费用的路由时，可流量平衡</p>
<p>（4）、支持子网</p>
<p>（5）、支持简单验证</p>
<p>（6）采用多播</p>
<p>（7）点对点链路，不需要每一端都有一个IP地址</p>
<h4 id="10-3-BGP-边界网关协议"><a href="#10-3-BGP-边界网关协议" class="headerlink" title="10.3 BGP 边界网关协议"></a>10.3 BGP 边界网关协议</h4><p>BGP是一种不同自治系统的路由器之间进行通信的外部网关协议。BGP系统与其他 BGP系统之间交换网络可到达信息。这些信息包括数据到达这些网络所 必须经过的自治系统 AS中的所有路径。这些信息足以构造一幅自治系统连接图。然后，可以 根据连接图删除选路环，制订选路策略。</p>
<p>BGP与RIP和OSPF的不同之处在于BGP使用TCP作为其传输层协议。两个运行BGP的系统 之间建立一条TCP连接，然后交换整个BGP路由表。</p>
<p>BGP是一个距离向量协议，但是与（通告到目的地址跳数的）RIP不同的是，BGP列举了 到每个目的地址的路由。</p>
<h4 id="10-4-CIDR：无类型域间选路"><a href="#10-4-CIDR：无类型域间选路" class="headerlink" title="10.4 CIDR：无类型域间选路"></a>10.4 CIDR：无类型域间选路</h4><p>CIDR采用13～27位可变网络ID，而不是A-B-C类网络ID所用的固定的8、16和24位。</p>
<h4 id="10-5-习题"><a href="#10-5-习题" class="headerlink" title="10.5  习题"></a>10.5  习题</h4><p>（1）OSPF报文格式中有一个检验和字段，而 R I P报文则没有此项，这是为什么？</p>
<p>　		RIP报文基于UDP协议，UDP 有个校验和字段，OSPF基于IP协议，所有要增加校验和字段。</p>
<p>（２）OSPF的负载均衡对于传输层的影响是什么？</p>
<p>　　　可能造成分组的失序交付，计算的时间也可能出错。</p>
<h3 id="第11章、UDP协议"><a href="#第11章、UDP协议" class="headerlink" title="第11章、UDP协议"></a>第11章、UDP协议</h3><p>UDP提供是一个简单的面向数据报的传输层协议，头部只8个字节，源端口，目的端口，UDP长度，校验和。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240202162432137.png" alt="image-20240202162432137"></p>
<p>UDP 的校验和是把若干个 16 bit字相加，不满的填充0字节，但是可能不发送。同时还设置了伪首部用于计算校验和，伪首部还包括源IP、目的IP 、8位协议、16位UDP长度。</p>
<ul>
<li>IP 数据报的分片</li>
</ul>
<p>UDP首部只出现在第一片数据中。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240204151021583.png" alt="image-20240204151021583"></p>
<ul>
<li><p>ICMP 不可达差错</p>
<p>发生ICMP不可达差错的另一种情况是，当路由器收到一份需要分片的数据报，而在IP首 部又设置了不分片（D F）的标志比特。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240204152439555.png" alt="image-20240204152439555"></p>
</li>
<li><p>习题</p>
<ul>
<li><p>IEEE 802 封装格式，向UDP数据包中插入多少字节的数据会引发分片？</p>
<p>正常情况下  1500-20（IP 首部）-8 （UDP 首部）&#x3D; 1472</p>
<p>但是 IEEE 802 封装 多了8个字节的头部数据，因此需要再减去8   1472-8 &#x3D; 1464  </p>
<p>所以插入1465个字节的数据会引发分片、</p>
</li>
<li><p>理解为什么除最后一片外，其他片中的数据长度均要求为 8字节的整数倍？</p>
<p>IP 头部的 片偏移：占13位。较长的分组在分片后，某片在原分组中的相对位置。以8字节为偏移。</p>
</li>
<li><p>UDP 数据报 引发的分片，如果被分成了四片，但是丢失了两片（３，４），重发的数据包（３，４）能否和当前的数据包组包？</p>
<p>不能，IP首部的标识字段不同。</p>
</li>
<li><p>UDP数据报是根据目的U D P端口号进行分配的。这正确吗？</p>
<p>有一些会根据目的IP地址，源IP地址和源端口号来过滤一个送往特定端口的数据报。</p>
</li>
</ul>
</li>
</ul>
<h3 id="第12章、广播和多播"><a href="#第12章、广播和多播" class="headerlink" title="第12章、广播和多播"></a>第12章、广播和多播</h3><p>广播和多播仅应用于UDP。对于以太网，当地址中 最高字节的最低位设置为 1时表示该地址是一个多播地址， 用十六进制可表示为 0 1 : 0 0 : 0 0 : 0 0 : 0 0 : 0 0。</p>
<p>网卡收到一个帧的过程:   帧校验出错，丢弃，正常则这个帧被传送给驱动程序，驱动程序校验协议、多播过滤等，校验通过，发送给下一层IP层，IP层根据源IP和目的IP进行过滤；校验通过发送给下一层（TCP&#x2F;UDP）;  TCP(UDP) 进行可选的源端口过滤，随后进行目的端口检测，如果没有则发送一个ICMP不可达报文。</p>
<ul>
<li><p>广播</p>
<p>四种广播地址：</p>
<ul>
<li><p>受限的广播地址  255.255.255.255  该地址用于主机配置过程中 I P数据报的目的地址。路由器不转发。</p>
</li>
<li><p>指向网络的广播地址 ：主机号全1 如A 类 广播地址 netid.255.255.255   路由器必须转发。</p>
</li>
<li><p>指向子网的广播地址： 主机号全位1 且有特定子网号的地址，如发往128.1.2.255 的数据包，如果子网掩码是255.255.255.0，则说明是广播地址。 </p>
</li>
<li><p>指向所有子网的广播地址： 子网号及主机号为全1</p>
</li>
</ul>
</li>
<li><p>多播</p>
<p>多播组地址包括为 111 0的最高4 bit和多播组号。它们通常可表示为点分十进制数，范围 从224.0.0.0到239.255.255.255。</p>
<ul>
<li><p>多播地址与以太网地址的转换</p>
<p>IANA拥有一个以太网地址块，即高位 24 bit为00:00:5e（十六进制表示），这意味着该地 址块所拥有的地址范围从 00:00:5e:00:00:00到00:00:5e:ff:ff:ff。IANA将其中的一半分配为多播 地址。为了指明一个多播地址，任何一个以太网地址的首字节必须是 01，这意味着与 I P多播 相对应的以太网地址范围从01:00:5e:00:00:00到01:00:5e:ff:ff:ff。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240204174349004.png" alt="image-20240204174349004"></p>
</li>
<li><p>多播的过程</p>
<p>多播进程将目的 IP 地址指明为多播地址，设备驱动程序将它转换为相应的以太网地址，然后把数据发送出去。</p>
<p>这些接收进程必须通知它们的 IP层，它们 想接收的发往给定多播地址的数据报，并且设备驱动程序必须能够接收这些多播帧。这个过程 就是“加入一个多播组”（使用“接收进程”复数形式的原因在于对一确定的多播信息，在同一 主机或多个主机上存在多个接收者，这也是为什么要首先使用多播的原因）。</p>
<p>当一个主机收到多播数据报时，它必须向属于那个多播组的每个进程均传送一个复制。</p>
</li>
</ul>
</li>
<li><p>习题</p>
<p>（1）广播是否增加了网络通信量？</p>
<p>   答： 没有，广播只是增加了主机处理时间。</p>
<p>​         不增加网络通信量：广播是一种将消息发送到网络上所有设备的通信方式。当广播消息发送时，它并不 会在网络中产生额外的数据传输量，因为消息只是被发送一次，而不是针对每个接收者都单独传输。</p>
<p>​         增加主机处理时间：尽管广播本身不会导致网络通信量的增加，但接收广播消息的每个主机都需要处理这个消息。这可能涉及到解析、检查、响应等操作，这些都需要主机的处理能力。因此，广播可能增加了网络中每个接收设备的额外主机处理时间。</p>
<p>（2）主机如何处理来自运行另一个协议族主机的广播？</p>
<p>   答： 类型字段如果显示是其他协议，设备驱动程序会丢弃。</p>
<p>（3）ping 向一个广播地址发送分组，字节为1473会发生错误，为什么吗？</p>
<p>答： 因为广播不支持分片，以太网MTU是1500，最大支持1472。（1500-20-14-4）</p>
</li>
</ul>
<h3 id="第13章、IGMP：Internet组管理协议"><a href="#第13章、IGMP：Internet组管理协议" class="headerlink" title="第13章、IGMP：Internet组管理协议"></a>第13章、IGMP：Internet组管理协议</h3><h4 id="13-1-引言"><a href="#13-1-引言" class="headerlink" title="13.1 引言"></a>13.1 引言</h4><p>IGMP 用于支持主机和路由器进行多播的 。</p>
<p>IGMP被封装在IP数据报中，8个字节。IGMP报文格式如下，第一个字节前四位是版本信息，后四位是类型信息，类型位1 则代表是组播路由器发送的查询报文，为1 代表是主机发送的报告报文，第二字节未用，第三四两个字节是校验和，后四位是32位的组地址。查询报文中组播地址为0，报告报文中组播地址为主机要加入的组地址。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219145309314.png" alt="image-20240219145309314"></p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219145436420.png" alt="image-20240219145436420"></p>
<p>路由器通过定时向每一个接口发送查询报文来获悉哪些些主机的进程属于多播组。查询报文仅仅是为了确定某个多个多播地址还有存货主机。</p>
<h4 id="13-2-习题"><a href="#13-2-习题" class="headerlink" title="13.2 习题"></a>13.2 习题</h4><p>（1）一个局域网中的主机采取什么措 施才能避免两台主机产生相同的随机时延？</p>
<p>答： 生成随机数时，要采用针对主机唯一的值。</p>
<p>（2）U D P缺少两个通过M B O N E传送音频采样数据 的条件：分组失序检测和分组重复检测。你怎样在 U D P上增加这些功能？</p>
<p>答： 增加序号和时间戳</p>
<h3 id="第14章-DNS-：-域名系统"><a href="#第14章-DNS-：-域名系统" class="headerlink" title="第14章  DNS ： 域名系统"></a>第14章  DNS ： 域名系统</h3><p>14.1 基础</p>
<p>DNS是一种用于TCP&#x2F;IP的分布式数据库，提供主机到IP地址的解析。DNS系统是一个树状的结构，从上到下依次是根域名，顶级域名，二级域名等。只有上级域名才知道下一级域名的IP地址，所以查询一个域名的IP地址就是逐级查询，首选通过查询根域名服务器获取顶级域名服务器的IP地址，然后通过顶级域名服务器获得二级域名服务器的IP地址，依次，最后查询到域名的IP地址。</p>
<p>DNS的报文格式如下：12个字节首部和4个长度可变的字段组成。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219154150127.png" alt="image-20240219154150127"></p>
<p>DNS 查询报文的格式如下，gemini.tuc.noao.edu   以上述域名为例解释查询名，查询名首先是gemini的长度6，然后才是Gemini，随后是3，tuc,   4,  nano , 3, edu ,最后以0结尾。查询类型最常用的就是A类型，PTR，CNAME等，查询类通常为１，表示互联网地址。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219154537165.png" alt="image-20240219154537165"></p>
<p>DNS响应中的资源记录部分的格式：域名同上查询名，类型同上查询类型，类同上查询类，生存时间一般是2天，资源数据长度一般取决于类型，资源数据就是返回的数据了。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219155324994.png" alt="image-20240219155324994"></p>
<p>查询类型： </p>
<p>A记录  ： 定义了一个32位 IP地址</p>
<p>PTR：  指针记录用于指针查询一个IP对应的域名，IP地址看作为in-addr.arpa域下的一个域名，如140.252.1.29 可以写作 29.1.252.140.in-addr.arpa</p>
<p>CNAME： 表示一个域名的别名</p>
<p>NS：  名字服务器记录，表示一个域的授权名字服务器</p>
<h3 id="第15章-TFTP：-简单文件传送协议"><a href="#第15章-TFTP：-简单文件传送协议" class="headerlink" title="第15章 TFTP： 简单文件传送协议"></a>第15章 TFTP： 简单文件传送协议</h3><h4 id="15-1-简介"><a href="#15-1-简介" class="headerlink" title="15.1  简介"></a>15.1  简介</h4><p>tftp 是一个简单的协议，适合于只读存储器，仅用于无盘系统进行系统引导。</p>
<p>为了保持简单和短小，采用UDP协议传输。主要有五种报文格式，如下图所示，头两个字节表示操作码，对应读请求和写请求，后续是文件名字段，以０字节结尾，随后是模式字段，主要分netascii 和octet ，前者表示是以成行的ascii 字段以及换行符组成，后者则是单纯以八位一字节的方式读取。块编号主要是用于确认分组使用，当服务器发送数据给客户端以后，客户端回复相应块编号的确认ack。此外还有一个差错报文，主要用于处理传输过程中的出错，从而停止传输。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219164416568.png" alt="image-20240219164416568">ih</p>
<p>传输过程中，为了保证并行传输，只有第一个报文是采用的69端口，随后服务器进程会申请另一个端口进行数据传输。客户端的端口不会发生变化。</p>
<p>TFTP的安全性通过限制访问特定目录下的文件来保证。</p>
<h4 id="15-2-习题"><a href="#15-2-习题" class="headerlink" title="15.2 习题"></a>15.2 习题</h4><p>（1）影响TFTP传输的因素</p>
<ul>
<li>网络延迟</li>
<li>数据包丢失和重传</li>
<li>文件大小，文件过大会导致分片过多，从而影响传输效率</li>
</ul>
<h3 id="第16章-BOOTP：引导程序协议"><a href="#第16章-BOOTP：引导程序协议" class="headerlink" title="第16章　BOOTP：引导程序协议"></a>第16章　BOOTP：引导程序协议</h3><p>BOOTP 用于无盘系统进行系统引导。	分组格式如下：被封装在UDP数据报中。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219170855398.png" alt="image-20240219170855398"></p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219170931218.png" alt="image-20240219170931218"></p>
<p>BooTP的服务器端口是67 ，客户端端口是68，服务器应答可以广播。</p>
<p>BOOTP使用UDP，它为引导无盘系统获得它的 IP地址提供了除RARP外的另外一种选择。</p>
<p>BooTP服务器通过两种方式把响应送给客户，第一在高速ARP中设置一个条目，第二服务器广播。</p>
<p>16.2 习题</p>
<p>（1）如果在路由器中增加允许转发RARP请求的功能会发生什么？</p>
<p>解决了转发请求还得解决转发响应。比较复杂。</p>
<h3 id="第17章-TCP协议"><a href="#第17章-TCP协议" class="headerlink" title="第17章 TCP协议"></a>第17章 TCP协议</h3><h4 id="17-1-基本概念"><a href="#17-1-基本概念" class="headerlink" title="17.1 基本概念"></a>17.1 基本概念</h4><p>TCP提供一种面向连接的、可靠的字节流服务。</p>
<p>TCP可靠性的保证依靠以下条件：</p>
<ul>
<li>分片</li>
<li>超时重传</li>
<li>收到数据包发送确认</li>
<li>校验和</li>
<li>重新排序</li>
<li>丢弃重复的数据</li>
<li>流量控制</li>
</ul>
<p>TCP首部的格式如下</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240219182724139.png" alt="image-20240219182724139"></p>
<h4 id="17-2-习题："><a href="#17-2-习题：" class="headerlink" title="17.2 习题："></a>17.2 习题：</h4><p>（1） I P、I C M P、I G M P、U D P和T C P。每一种格式的首 部中均包含一个检验和。对每种分组，说明检验和包括 I P数据报中的哪些部分，以及该 检验和是强制的还是可选的。</p>
<p>答： IP 仅校验首部，UDP不是必须的。</p>
<p>（2）为什么校验和失败后丢弃处理？</p>
<p>答：其他字段可能已经被破坏</p>
<p>（3）为什么TCP首部的开始便是源和目的端口？</p>
<p>因为ICMP差错报文，包含了除了IP的前八个字节，因此为了提供源和目的端口来确认差错，TCP首部一开始便是源和目的端口。</p>
<h3 id="第18章-TCP连接的建立与终止"><a href="#第18章-TCP连接的建立与终止" class="headerlink" title="第18章  TCP连接的建立与终止"></a>第18章  TCP连接的建立与终止</h3><h4 id="18-1-基础"><a href="#18-1-基础" class="headerlink" title="18.1 基础"></a>18.1 基础</h4><p>建立三次握手的过程</p>
<ul>
<li>发送方A 发送SYN包给B，SYN置位，Seq&#x3D;0(相对数27928735)</li>
<li>接收方B 收到SYN包后，发送［SYN ACK］给A，SYN　ACK置位，Seq&#x3D;0(相对位置3203894047，不同于发送方的Seq)， Ack&#x3D;1 (发送方的Seq+1 27928736)</li>
<li>发送方发送[ACK] 包，ACK置位，Seq&#x3D;1(27928736), Ack&#x3D;1(3203894048)</li>
</ul>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240220151130394.png" alt="image-20240220151130394"></p>
<p>终止连接，四次挥手的过程</p>
<ul>
<li>发送方A 发送[FIN  ACK ] 包，置位FIN ACK ，Ack&#x3D;76(27928811)确认上次的包，Seq&#x3D;1(相对位置 3203894048)</li>
<li>接受方B 发送[ACk]包，置位ACK，Seq&#x3D;76(27928811)，ACK&#x3D;2（3203894049）</li>
<li>接受方B 发送[FIN  ACK ] 包，置位FIN ACK ，Seq&#x3D;76(27928811)，ACK&#x3D;2（3203894049）</li>
<li>发送方A 发送[ACk]包，置位ACK，Seq&#x3D;2(3203894049)，ACK&#x3D;77（27928812）</li>
</ul>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240220152100038.png" alt="image-20240220152100038"></p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240220153704408.png" alt="image-20240220153704408"></p>
<p>Time Wait 状态</p>
<p>主动关闭方在收到被动关闭方的<code>FIN</code>包后并返回<code>ACK</code>后，会进入<code>TIME_WAIT</code>状态，<code>TIME_WAIT</code>状态又称<code>2MSL</code>状态，每个TCP连接都必须有一个最大报文段生存时间MSL，在网络传输中超过这个时间的报文段将被丢弃。在此期间，定义这个连接的插口 （客户的I P地址和端口号，服务器的 I P地址和端口号）不能再被使用。这个连接只能在 2MSL 结束后才能再被使用。</p>
<p>以下是TCP的状态变迁图，可以清晰的看到TCP从Listen-&gt;ESTABLISHEND-&gt;FIN_WAIT_1-&gt;FIN_WAIT_2-&gt;TIME_WAIT-&gt;CLOSE的状态。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/imgimage-20240220165935657.png" alt="image-20240220165935657"></p>
<h4 id="18-2-习题"><a href="#18-2-习题" class="headerlink" title="18.2 习题"></a>18.2 习题</h4><p>（1）半打开连接和半关闭连接的区别是什么？</p>
<p>答： 半连接是发生在三次握手过程中，A向B发起连接，B也回应了，但是A不继续握手了。</p>
<p>半打开连接是正常连接通信过程中，一方异常关闭了，而另一方不知道的情况。</p>
<p>半关闭连接是其中一方发送了FIN包，但是另一方还没有发送FIN，因此还可以单向传输数据。</p>
<p>（2）服务器不将对客户 F I N的A C K与自己的F I N合并，从而将报文段数减 少为3个？</p>
<p>答：第一 收到FIN后需要立即发送ack，但是服务器进程需要时间告诉TCP关闭这一连接；第二，服务器并不是收到FIN后，就一定想关闭连接，可能还有数据没有发送完。</p>
<p>（3）DNS采用TCP而不是UDP发送请求，每次查询需要多少个分组？</p>
<p>答： 3个tcp连接，一个查询，一个确认查询，一个响应，一个确认响应，4个关闭连接，一共11个。</p>
<h3 id="第20章-TCP的成块数据流"><a href="#第20章-TCP的成块数据流" class="headerlink" title="第20章  TCP的成块数据流"></a>第20章  TCP的成块数据流</h3><h4 id="20-1-基本概念"><a href="#20-1-基本概念" class="headerlink" title="20.1 基本概念"></a>20.1 基本概念</h4><p>（1）滑动窗口</p>
<p>滑动窗口协议是传输层进行流量控制的一种措施，接收方通过通告发送方自己的窗口大小，从而达到发送方的发送速度，以达到流量控制的目的。</p>
<p>滑动窗口解决了单个报文确认导致的通信效率低的问题。</p>
<p>窗口是不需要等待确认，可以连续发送数据包的最大值。</p>
<p>滑动窗口的累计确认原则还可以解决部分确认数据包丢失的问题，只要序号更大的数据确认包收到了，代表它之前的数据都收到了，不必重发。</p>
<p>发送端和接收端均存在一个窗口，发送端窗口大小不能超过接收端的窗口大小。针对发送窗口而言，实际就是发送端的一个缓冲区大小，在数据没有收到确认之前，缓冲区的数据不能被清空，发送窗口用完，就不能继续发送数据了，必须等待确认之后，清空缓存的数据，才可以继续发送数据。</p>
<p>（2）拥塞窗口</p>
<p>为了避免或者减小拥塞，TCP设计了一个拥塞窗口，发送窗口约等于拥塞窗口和接收窗口的最小值。拥塞窗口的原则是只要没有发生拥塞，窗口就不断增大，如何判断网络发生了拥塞，即没有收到ack报文，发生了超时重传，则认为发生了拥塞。这其中又涉及了四个算法慢启动（指数型）、拥塞避免（线性）、拥塞发生（减半+1）、快速恢复。</p>
<p>（3）PUSH标志</p>
<p>PUSH标志用于接收方告诉发送方将所收到的数据全部提交给接收进程。</p>
<h4 id="20-2-习题"><a href="#20-2-习题" class="headerlink" title="20.2 习题"></a>20.2 习题</h4><p>（1）在一个Usenet记录中，有人抱怨说美国和日本之间的一个128 ms时延、速率为256 000 b&#x2F;s的链 路吞吐量为120 000 b&#x2F;s（利用率为4 7 %），而当链路通过卫星时其吞吐量则为33 000 b&#x2F;s（利用 率为1 3％）。试问在这两种情况下窗口大小各为多少（假定卫星链路的时延为500 ms）？卫星 链路的窗口大小应该如何调整？</p>
<p>答： 第一种情况  120000*128&#x2F;1000&#x2F;8 &#x3D; 1920 字节，第二种情况是33000X500&#x2F;1000&#x2F;8&#x3D;2062字节</p>
<p>利用率为13%，那么最大情况应该是 2062&#x2F;13%&#x3D;15862</p>
<h3 id="第21（22，23，24）章-TCP的超时和重传、坚持定时器、保活定时器、未来和性能"><a href="#第21（22，23，24）章-TCP的超时和重传、坚持定时器、保活定时器、未来和性能" class="headerlink" title="第21（22，23，24）章 TCP的超时和重传、坚持定时器、保活定时器、未来和性能"></a>第21（22，23，24）章 TCP的超时和重传、坚持定时器、保活定时器、未来和性能</h3><h4 id="21-1-基础"><a href="#21-1-基础" class="headerlink" title="21.1  基础"></a>21.1  基础</h4><p>TCP 提供可靠的运输层，其原因之一就是数据的发送与确认，TCP通过维护一个定时器来解决重传的问题。</p>
<ul>
<li><p>TCP定时器</p>
<p>TCP 一共维持了4个定时器：</p>
<p>重传定时器:  分为超时重传和快速重传。重传定时器：超时重传时间的间隔存在一个倍乘关系，称之为“指数退避”。例如重传间隔时间分别为1，3，6，12，24，48，64，64，64，64，64…。快速重传则是在收到连续三个的确认包后发生的。</p>
<p>坚持定时器：为了避免因确认丢失，双方出现互相等待对方的情况，发送方使用一个坚持定时器来周期性的向接收方查看窗口是否增大。</p>
<p>保活定时器：在连接空闲两个小时后，在一个连接上发送一个探查分组来完成保活功能。可能会发生四种不同的情况：对端正常、对端崩溃（发送10个探查，间隔75S，对端无回应）、对端崩溃并重新启动（收到复位回应）、对端不可达（同对端崩溃）。</p>
<p>2MSL定时器：测量一个连接处于 TIME_WA I T状态的时间。</p>
</li>
<li><p>TCP拥塞措施</p>
<p>当网络处于饱和状态时，不必要的重传会增加网络的负载，因此一方面需要一个合适的RTT时间，另外一方面</p>
<p>TCP还提出了一系列的措施来避免网络拥塞，包括慢启动、拥塞避免、快速重传、快速恢复。</p>
<p>慢启动算法： 指数级增长，初始cwnd(拥塞窗口)&#x3D;1，每次接收到一个ack，cwnd &#x3D; cwnd*2 ，直至到慢启动门限 ssthresh。</p>
<p>拥塞避免：在此阶段，每经过一个RTT，cwnd&#x3D;cwnd+1 , 从指数增长变成线性增长。</p>
<p>此后就会出现丢包，就进入拥塞发生阶段，导致TCP重传。TCP重传有两大类：超时重传和快速重传。</p>
<p>超时重传发生后，ssthresh 变成cwnd的一半，随后继续慢启动cwnd&#x3D;1。</p>
<p>快速重传：快速重传会在收到三个重复的ack后发生，随后进入快恢复阶段。快恢复：cwnd（拥塞窗口） &#x3D; cwnd&#x2F;2，ssthresh &#x3D; cwnd，cwnd设置为ssthresh+3，重传丢失的数据包，继续收到重复的ack ，cwnd继续加1，当收到新的ack确认，快恢复结束，将cwnd的值设置为ssthresh。重新进入拥塞避免阶段。</p>
<p><img src="https://raw.githubusercontent.com/scuzhangzhang/CP_img/master/img49807ba609f43f705025d3550d41ff34.jpeg" alt="img"></p>
<p>补充： 除了快速重传外，还有SACK和DACK，在TCP的首部有这样一个字段SACK	，可以告诉发送方已经收到哪些数据包，应该重传哪些。DACK则是重复确认报文，告诉发送方是网络延迟还是确认报文丢失。</p>
</li>
<li><p>TCP新特征：</p>
<p>TCP提供了新的特征： 路径MTU发现、窗口扩大选项、时间戳选项、序号回绕保护、以及改进的TCP事务处理。</p>
<ul>
<li>路径MTU发现：路径MTU是在一条因特尔传输路径中，从源地址到目的地址所经过路径的最大传输单元的最小值。路径MTU发现技术则是确定两个主机之间最大传输单元的技术，目的是为了避免分片。其原理就是置位DF，逐步增大发送的数据包大小，直至出现ICMP差错响应，再减小发送的数据包大小，以此找到最佳的MTU。</li>
<li>窗口扩大选项：窗口扩大选项使得TCP窗口从16位变成32位，但是并没有修改TCP首部，而是通过定义一个选项来实现的，最大是14位，所以是2^16^14&#x3D;2^30，在发送SYN报文的时候发送这个选项，接受发送收到该选项后继续发送这个选项。</li>
<li>时间戳选项：在高速TCP连接中，32bit的序号可能很快就会用完一个轮回，时间戳选项可以用来甄别是不是属于上一个周期，同时可以使 T C P对报文段进行更加精确的 RTT测量。</li>
<li>序号回绕保护：本质实际上是<strong>利用 TCP Timestamp 选项的单调递增特性来识别老旧的报文</strong>，防止这些老旧报文的干扰。</li>
<li>改进的TCP 事务处理：绕过三次握手，缩短 WAIT_TIME状态，</li>
</ul>
</li>
</ul>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="hack_zz 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="hack_zz 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>hack_zz
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://zwjsfdbb.top/2024/03/10/%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/TCPIP%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="TCP-IP 学习笔记">http://zwjsfdbb.top/2024/03/10/系统基础/TCPIP学习笔记/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/" rel="tag"># 系统基础</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/02/19/Web%E6%B8%97%E9%80%8F/python%20%E5%BC%80%E5%8F%91xss%E6%89%AB%E6%8F%8F%E5%99%A8/" rel="prev" title="python 开发xss 扫描工具">
      <i class="fa fa-chevron-left"></i> python 开发xss 扫描工具
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/03/10/%E9%80%86%E5%90%91/%E5%86%85%E5%AD%98%E5%88%86%E9%A1%B5%E5%8E%9F%E7%90%86/" rel="next" title="内存分页原理">
      内存分页原理 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0"><span class="nav-number">1.</span> <span class="nav-text">第一章 概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81ARP%E5%8D%8F%E8%AE%AE"><span class="nav-number">1.1.</span> <span class="nav-text">1、ARP协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81ICMP%E5%8D%8F%E8%AE%AE"><span class="nav-number">1.2.</span> <span class="nav-text">2、ICMP协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81unix-%E7%B3%BB%E7%BB%9F%E7%AB%AF%E5%8F%A3%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6"><span class="nav-number">1.3.</span> <span class="nav-text">3、unix 系统端口定义文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81-%E8%AF%BE%E5%90%8E%E4%B9%A0%E9%A2%98"><span class="nav-number">1.4.</span> <span class="nav-text">4、 课后习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="nav-number">2.</span> <span class="nav-text">第二章链路层</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="nav-number">2.1.</span> <span class="nav-text">1、链路层的功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E5%8D%8F%E8%AE%AE-%E4%BB%A5%E5%A4%AA%E7%BD%91%E3%80%81%E4%BB%A4%E7%89%8C%E7%8E%AF%E7%BD%91%E3%80%81FDDI%EF%BC%88%E5%85%89%E7%BA%A4%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3%EF%BC%89%E5%8F%8ARS-232%E4%B8%B2%E8%A1%8C%E7%BA%BF%E8%B7%AF"><span class="nav-number">2.2.</span> <span class="nav-text">2、协议  (以太网、令牌环网、FDDI（光纤分布式数据接口）及RS-232串行线路)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E4%B8%B2%E8%A1%8C%E7%BA%BF%E8%B7%AF%E5%90%9E%E5%90%90%E9%87%8F%E8%AE%A1%E7%AE%97"><span class="nav-number">2.3.</span> <span class="nav-text">3、串行线路吞吐量计算</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E4%B9%A0%E9%A2%98"><span class="nav-number">2.4.</span> <span class="nav-text">4、习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-IP%EF%BC%9A-%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE"><span class="nav-number">3.</span> <span class="nav-text">第三章 IP： 网际协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E6%A6%82%E5%BF%B5"><span class="nav-number">3.1.</span> <span class="nav-text">1、概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E5%AD%97%E6%AE%B5"><span class="nav-number">3.2.</span> <span class="nav-text">2、字段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81IP%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="nav-number">3.3.</span> <span class="nav-text">3、IP路由选择的功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E4%B9%A0%E9%A2%98-1"><span class="nav-number">3.4.</span> <span class="nav-text">4、习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-ARP%E5%8D%8F%E8%AE%AE"><span class="nav-number">4.</span> <span class="nav-text">第四章 ARP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">4.1.</span> <span class="nav-text">1、基本概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E3%80%81-ARP%E6%8A%A5%E6%96%87%E7%9A%84%E6%A0%BC%E5%BC%8F"><span class="nav-number">4.2.</span> <span class="nav-text">2 、 ARP报文的格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E4%BB%A3%E7%90%86ARP"><span class="nav-number">4.3.</span> <span class="nav-text">3、代理ARP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4%E3%80%81%E5%85%8D%E8%B4%B9ARP"><span class="nav-number">4.4.</span> <span class="nav-text">4、免费ARP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5%E3%80%81%E4%B9%A0%E9%A2%98"><span class="nav-number">4.5.</span> <span class="nav-text">5、习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-RARP%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.</span> <span class="nav-text">第五章 RARP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E6%A6%82%E5%BF%B5-1"><span class="nav-number">5.1.</span> <span class="nav-text">1、概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E5%88%86%E7%BB%84%E6%A0%BC%E5%BC%8F"><span class="nav-number">5.2.</span> <span class="nav-text">2、分组格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E4%B9%A0%E9%A2%98"><span class="nav-number">5.3.</span> <span class="nav-text">3、习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-ICMP%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.</span> <span class="nav-text">第六章 ICMP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1%E3%80%81%E5%BC%95%E8%A8%80"><span class="nav-number">6.1.</span> <span class="nav-text">1、引言</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2%E3%80%81%E6%8A%A5%E6%96%87%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="nav-number">6.2.</span> <span class="nav-text">2、报文的类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3%E3%80%81%E4%B9%A0%E9%A2%98-1"><span class="nav-number">6.3.</span> <span class="nav-text">3、习题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3-1-%E5%9C%A86-2%E8%8A%82%E7%9A%84%E6%9C%AB%E5%B0%BE%EF%BC%8C%E6%88%91%E4%BB%AC%E5%88%97%E5%87%BA%E4%BA%865%E7%A7%8D%E4%B8%8D%E5%8F%91%E9%80%81ICMP%E5%B7%AE%E9%94%99%E6%8A%A5%E6%96%87%E7%9A%84%E7%89%B9%E6%AE%8A%E6%9D%A1%E4%BB%B6%E3%80%82%E5%A6%82%E6%9E%9C%E8%BF%99%E4%BA%9B%E6%9D%A1%E4%BB%B6%E4%B8%8D%E6%BB%A1%E8%B6%B3%E8%80%8C%E6%88%91%E4%BB%AC%E5%8F%88%E5%9C%A8%E5%B1%80%E5%9F%9F%E7%BD%91%E4%B8%8A%E5%90%91%E4%B8%80%E4%B8%AA%E4%BC%BC%E4%B9%8E%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%8F%B7%E5%8F%91%E9%80%81%E4%B8%80%E4%BB%BD%E5%B9%BF%E6%92%ADUDP%E6%95%B0%E6%8D%AE%E6%8A%A5%EF%BC%8C%E8%BF%99%E6%97%B6%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84%E6%83%85%E5%86%B5%EF%BC%9F"><span class="nav-number">6.3.1.</span> <span class="nav-text">3.1 在6.2节的末尾，我们列出了5种不发送ICMP差错报文的特殊条件。如果这些条件不满足而我们又在局域网上向一个似乎不存在的端口号发送一份广播UDP数据报，这时会发生什么样的情况？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-%E9%98%85%E8%AF%BBRFC-Braden-1989a-%EF%BC%8C%E6%B3%A8%E6%84%8F%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AAICMP%E7%AB%AF%E5%8F%A3%E4%B8%8D%E5%8F%AF%E8%BE%BE%E5%B7%AE%E9%94%99%E6%98%AF%E5%90%A6%E4%B8%BA%E2%80%9C%E5%BF%85%E9%A1%BB%E2%80%9D%EF%BC%8C%E2%80%9C%E5%BA%94%E8%AF%A5%E2%80%9D%E6%88%96%E8%80%85%E2%80%9C%E5%8F%AF%E8%83%BD%E2%80%9D%E3%80%82%E8%BF%99%E4%BA%9B%E4%BF%A1%E6%81%AF%E6%89%80%E5%9C%A8%E7%9A%84%E9%A1%B5%E7%A0%81%E5%92%8C%E7%AB%A0%E8%8A%82%E6%98%AF%E5%A4%9A%E5%B0%91%EF%BC%9F"><span class="nav-number">6.3.2.</span> <span class="nav-text">3.2 阅读RFC [Braden 1989a]，注意生成一个ICMP端口不可达差错是否为“必须”，“应该”或者“可能”。这些信息所在的页码和章节是多少？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-3-%E9%98%85%E8%AF%BBRFC-1349-Almquist-1992-%EF%BC%8C%E7%9C%8B%E7%9C%8BIP%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%B1%BB%E5%9E%8B%E5%AD%97%E6%AE%B5%EF%BC%88%E8%A7%81%E5%9B%BE3-2%EF%BC%89%E6%98%AF%E5%A6%82%E4%BD%95%E8%A2%ABICMP%E8%AE%BE%E7%BD%AE%E7%9A%84%EF%BC%9F"><span class="nav-number">6.3.3.</span> <span class="nav-text">3.3 阅读RFC 1349 [Almquist 1992]，看看IP的服务类型字段（见图3-2）是如何被ICMP设置的？</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-4-%E5%A6%82%E6%9E%9C%E4%BD%A0%E7%9A%84%E7%B3%BB%E7%BB%9F%E6%8F%90%E4%BE%9Bnetstat%E5%91%BD%E4%BB%A4%EF%BC%8C%E8%AF%B7%E7%94%A8%E5%AE%83%E6%9D%A5%E6%9F%A5%E7%9C%8B%E6%8E%A5%E6%94%B6%E5%92%8C%E5%8F%91%E9%80%81%E7%9A%84ICMP%E6%8A%A5%E6%96%87%E7%B1%BB%E5%9E%8B%E3%80%82"><span class="nav-number">6.3.4.</span> <span class="nav-text">3.4 如果你的系统提供netstat命令，请用它来查看接收和发送的ICMP报文类型。</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-ping"><span class="nav-number">7.</span> <span class="nav-text">第七章 ping</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-%E6%A6%82%E5%BF%B5"><span class="nav-number">7.1.</span> <span class="nav-text">7.1 概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-ping-%E7%89%B9%E6%AE%8A%E5%8A%9F%E8%83%BD"><span class="nav-number">7.2.</span> <span class="nav-text">7.2  ping 特殊功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3-%E4%B9%A0%E9%A2%98"><span class="nav-number">7.3.</span> <span class="nav-text">7.3 习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-traceroute"><span class="nav-number">8.</span> <span class="nav-text">第八章 traceroute</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-IP%E9%80%89%E8%B7%AF"><span class="nav-number">9.</span> <span class="nav-text">第九章  IP选路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC10%E7%AB%A0-%E5%8A%A8%E6%80%81%E9%80%89%E8%B7%AF"><span class="nav-number">10.</span> <span class="nav-text">第10章 动态选路</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">10.1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-1-RIP%E5%8D%8F%E8%AE%AE"><span class="nav-number">10.2.</span> <span class="nav-text">10.1 RIP协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-2-OSPF%EF%BC%9A%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88"><span class="nav-number">10.3.</span> <span class="nav-text">10.2 OSPF：开放最短路径优先</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-3-BGP-%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE"><span class="nav-number">10.4.</span> <span class="nav-text">10.3 BGP 边界网关协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-4-CIDR%EF%BC%9A%E6%97%A0%E7%B1%BB%E5%9E%8B%E5%9F%9F%E9%97%B4%E9%80%89%E8%B7%AF"><span class="nav-number">10.5.</span> <span class="nav-text">10.4 CIDR：无类型域间选路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#10-5-%E4%B9%A0%E9%A2%98"><span class="nav-number">10.6.</span> <span class="nav-text">10.5  习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC11%E7%AB%A0%E3%80%81UDP%E5%8D%8F%E8%AE%AE"><span class="nav-number">11.</span> <span class="nav-text">第11章、UDP协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC12%E7%AB%A0%E3%80%81%E5%B9%BF%E6%92%AD%E5%92%8C%E5%A4%9A%E6%92%AD"><span class="nav-number">12.</span> <span class="nav-text">第12章、广播和多播</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC13%E7%AB%A0%E3%80%81IGMP%EF%BC%9AInternet%E7%BB%84%E7%AE%A1%E7%90%86%E5%8D%8F%E8%AE%AE"><span class="nav-number">13.</span> <span class="nav-text">第13章、IGMP：Internet组管理协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#13-1-%E5%BC%95%E8%A8%80"><span class="nav-number">13.1.</span> <span class="nav-text">13.1 引言</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#13-2-%E4%B9%A0%E9%A2%98"><span class="nav-number">13.2.</span> <span class="nav-text">13.2 习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC14%E7%AB%A0-DNS-%EF%BC%9A-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F"><span class="nav-number">14.</span> <span class="nav-text">第14章  DNS ： 域名系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC15%E7%AB%A0-TFTP%EF%BC%9A-%E7%AE%80%E5%8D%95%E6%96%87%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AE"><span class="nav-number">15.</span> <span class="nav-text">第15章 TFTP： 简单文件传送协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#15-1-%E7%AE%80%E4%BB%8B"><span class="nav-number">15.1.</span> <span class="nav-text">15.1  简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#15-2-%E4%B9%A0%E9%A2%98"><span class="nav-number">15.2.</span> <span class="nav-text">15.2 习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC16%E7%AB%A0-BOOTP%EF%BC%9A%E5%BC%95%E5%AF%BC%E7%A8%8B%E5%BA%8F%E5%8D%8F%E8%AE%AE"><span class="nav-number">16.</span> <span class="nav-text">第16章　BOOTP：引导程序协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC17%E7%AB%A0-TCP%E5%8D%8F%E8%AE%AE"><span class="nav-number">17.</span> <span class="nav-text">第17章 TCP协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#17-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">17.1.</span> <span class="nav-text">17.1 基本概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#17-2-%E4%B9%A0%E9%A2%98%EF%BC%9A"><span class="nav-number">17.2.</span> <span class="nav-text">17.2 习题：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC18%E7%AB%A0-TCP%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%BB%BA%E7%AB%8B%E4%B8%8E%E7%BB%88%E6%AD%A2"><span class="nav-number">18.</span> <span class="nav-text">第18章  TCP连接的建立与终止</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#18-1-%E5%9F%BA%E7%A1%80"><span class="nav-number">18.1.</span> <span class="nav-text">18.1 基础</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#18-2-%E4%B9%A0%E9%A2%98"><span class="nav-number">18.2.</span> <span class="nav-text">18.2 习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC20%E7%AB%A0-TCP%E7%9A%84%E6%88%90%E5%9D%97%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="nav-number">19.</span> <span class="nav-text">第20章  TCP的成块数据流</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#20-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number">19.1.</span> <span class="nav-text">20.1 基本概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#20-2-%E4%B9%A0%E9%A2%98"><span class="nav-number">19.2.</span> <span class="nav-text">20.2 习题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AC%AC21%EF%BC%8822%EF%BC%8C23%EF%BC%8C24%EF%BC%89%E7%AB%A0-TCP%E7%9A%84%E8%B6%85%E6%97%B6%E5%92%8C%E9%87%8D%E4%BC%A0%E3%80%81%E5%9D%9A%E6%8C%81%E5%AE%9A%E6%97%B6%E5%99%A8%E3%80%81%E4%BF%9D%E6%B4%BB%E5%AE%9A%E6%97%B6%E5%99%A8%E3%80%81%E6%9C%AA%E6%9D%A5%E5%92%8C%E6%80%A7%E8%83%BD"><span class="nav-number">20.</span> <span class="nav-text">第21（22，23，24）章 TCP的超时和重传、坚持定时器、保活定时器、未来和性能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#21-1-%E5%9F%BA%E7%A1%80"><span class="nav-number">20.1.</span> <span class="nav-text">21.1  基础</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">hack_zz</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">128</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hack_zz</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : 'ba624f1112450ac0437d',
      clientSecret: '815911bc627d433d1f233c833883b96e335ea413',
      repo        : 'hexo_discuss',
      owner       : 'scuzhangzhang',
      admin       : ['scuzhangzhang'],
      id          : 'c47fd3766e77fffd177c94ae3aa7960a',
        language: 'zh-CN',
      distractionFreeMode: false
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

</body>
</html>
